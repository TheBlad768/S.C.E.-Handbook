# SONIC-CLEAN-ENGINE-S.C.E.-

Для того чтобы отобразить текст на плане мы можем использовать одну из готовых функций в библиотеке SCE.

\
Первая функция это `Draw_PlaneText` для того чтобы отобразить простой текст размером 8x8 пикселей, то есть размер одного символа не может привышать один тайл.

\
Использовать код очень просто:

```asm
		; load text
		lea	Main_Text(pc),a1			; загрузить адрес текста в a1
		locVRAM	(VRAM_Plane_A_Name_Table+$D38),d1	; установить адрес на плане
		move.w	#make_art_tile($50F,1,FALSE),d3		; VRAM (позиция графики, линия палитры, приоритет)
		jsr	(Draw_PlaneText).w
```

\
В регистре `a1` у нас адрес нашего текста, в `d1` адрес плана на который мы хотим загрузить текст, в `d3` у нас адрес графики текста в VRAM.

\
Или же мы можем воспользоваться простым макросом:

```asm
		; load text
		DrawPlaneText	Main_Text, (VRAM_Plane_A_Name_Table+$D38), $50F, 1, FALSE
```

\
\
Вторая функция это `Draw_PlaneText_Advanced` для того чтобы отобразить текст любого размера, а не только 8x8 пикселей. Но размер всё ещё должен быть кратен 8.

\
Использовать код тоже очень просто:

```asm
		; load text
		lea	Main_Text(pc),a1			; загрузить адрес текста в a1
		locVRAM	(VRAM_Plane_A_Name_Table+$D38),d1	; установить адрес на плане

		; горизонтальный и вертикальный размер символов (размер/8-1)
		move.l	#words_to_long( \
			bytesToXcnt(((32)+(tile_width-1)),tile_width), \
			bytesToXcnt(((32)+(tile_height-1)),tile_height) \
		),d2
		move.w	#make_art_tile($50F,1,FALSE),d3		; VRAM (позиция графики, линия палитры, приоритет)
		jsr	(Draw_PlaneText).w
```

\
Или же мы можем воспользоваться простым макросом:

```asm
		; load text
		DrawPlaneTextAdvanced	Main_Text, (VRAM_Plane_A_Name_Table+$D38), 32, 32, $50F, 1, FALSE
```

\
В регистре `a1` у нас адрес нашего текста; в `d1` адрес плана на который мы хотим загрузить текст; в `d2` нужно указать размер символа по горизонтали и вертикали; в `d3` у нас адрес графики текста в VRAM.

\
\
Разбор дополнительных флагов в самих данных текста:

```asm
Main_Text:
		dc.b "Hello1"
		dc.b draw_planetext.nextline|1, draw_planetext.palette_line_1		; следующая линия, изменить линию палитры
		dc.b "Hello2"
		dc.b draw_planetext.end							; остановить выполнение программы
```

\
`Hello1` будет нарисован на первой линии палитры по адресу $50F в VRAM. Размер символов в VRAM будет составлять 32x32 пикселя (код работает как mapping функция, он не масштабирует сам текст);

Флаг `draw_planetext.nextline` перенесёт начальную позицию плана на следующую строку (row);

Флаг `draw_planetext.palette_line_1` изменит первую линию палитры на вторую линию палитры (0, 1, 2, 3 line). То есть вместо $50F теперь у нас будет $250F значение;

`Hello2` будет отрисован на следующей строке (row) и будет использовать другую линию палитры;

Флаг `draw_planetext.end` это сообщение программе о том, что нужно остановить загрузку символов и закончить выполнение программы. То есть просто `exit from program`


## Посмотреть другие гайды

[Вернуться на главную страницу](../)
