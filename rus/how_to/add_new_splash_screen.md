# SONIC-CLEAN-ENGINE-S.C.E.-TUTORIALS-

# –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π Splash Screen?

- [[add_new_splash_screen#–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤|–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤]]
	- [[add_new_splash_screen##Splash.asm|Splash.asm]]
	- [[add_new_splash_screen##–î–µ—Ä–µ–≤–æ –ø–∞–ø–∫–∏ Splash Screen|–î–µ—Ä–µ–≤–æ –ø–∞–ø–∫–∏ Splash Screen]]
- [[add_new_splash_screen#–ü—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ|–ü—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ]]
- [[add_new_splash_screen#–í–∫–ª—é—á–∞–µ–º Splash Screen|–í–∫–ª—é—á–∞–µ–º Splash Screen]]
	- [[add_new_splash_screen##–ú–µ–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –∏–≥—Ä—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)|–ú–µ–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –∏–≥—Ä—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)]]

[‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è ](..)

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º –ø–∞–ø–∫—É `Splash Screen` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ [Screens](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/tree/Clone-Driver-v2/Screens). –í –Ω–µ—ë –º—ã –ø–æ–º–µ—Å—Ç–∏–º –≤—Å–µ –Ω–∞—à–∏ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã.

```
üìÅ S.C.E. / S1-in-S3 (–∫–æ—Ä–µ–Ω—å)
‚îî‚îÄ‚îÄ üìÅ Screens
	‚îú‚îÄ‚îÄ üìÅ Continue
	‚îú‚îÄ‚îÄ üìÅ Level
	‚îú‚îÄ‚îÄ üìÅ Level Select
	‚îî‚îÄ‚îÄ üìÅ Splash Screen	<= –°–û–ó–î–ê–ô –ú–ï–ù–Ø ü•∫
```

–î–ª—è **Splash Screen'–∞** –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ, —Ç–∞–∫–∏–µ –∫–∞–∫: _–≥—Ä–∞—Ñ–∏–∫–∞, –∫–∞—Ä—Ç–∞, –ø–∞–ª–∏—Ç—Ä–∞_. –í —ç—Ç–æ–º –≥–∞–π–¥–µ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º —É–∂–µ –≥–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ—é –∫–∞—Ä—Ç–∏–Ω–∫—É, —Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ _—Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–∏ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã_, —ç—Ç–æ —É–∂–µ –≤ –≥–∞–π–¥–µ `"–ö–∞–∫ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–∞–Ω?"`. 

–î–ª—è —ç—Ç–æ–≥–æ –≥–∞–π–¥–∞ –º—ã –≤–æ–∑—å–º—ë–º –≥–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞ [Sonic-1-in-Sonic-3-S.C.E.-](https://github.com/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-/tree/flamedriver/Screens/Sega).

–°–∫–æ–ø–∏—Ä—É–µ–º –≤ –Ω–∞—à `Splash Screen` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `Enigma Map` –∏ `KosinskiPM Art` –∏–∑ [Screens/Sega/S3K](https://github.com/TheBlad768/Sonic-1-in-Sonic-3-S.C.E.-/tree/flamedriver/Screens/Sega/S3K) (–≤ Sonic-1-in-Sonic-3-S.C.E.- –∏—Å—Ö–æ–¥–Ω–∏–∫–µ):

```
üìÅ S1-in-S3 (–∫–æ—Ä–µ–Ω—å)
‚îî‚îÄ‚îÄ üìÅ Screens
	‚îî‚îÄ‚îÄ üìÅ Sega
	    ‚îî‚îÄ‚îÄ üìÅ S3K
	        ‚îú‚îÄ‚îÄ üìÅ Enigma Map		<<= –ö–û–ü–ò–†–£–Æ
	        ‚îî‚îÄ‚îÄ üìÅ KosinskiPM Art	<<= –ö–û–ü–ò–†–£–Æ
```
 
[Palettes](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/tree/Clone-Driver-v2/Screens/Level%20Select/Palettes "Palettes") —Å–∫–æ–ø–∏—Ä—É–µ–º –∏–∑ [Screens/Level Select](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/tree/Clone-Driver-v2/Screens/Level%20Select "Level Select"), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

```
üìÅ S.C.E. / S1-in-S3 (–∫–æ—Ä–µ–Ω—å)
‚îî‚îÄ‚îÄ üìÅ Screens
	‚îî‚îÄ‚îÄ üìÅ Level Select
	‚îî‚îÄ‚îÄ üìÅ SCE
		‚îú‚îÄ‚îÄ üìÅ KosinskiPM Art
		‚îî‚îÄ‚îÄ üìÅ Palettes	<<= –ö–û–ü–ò–†–£–Æ
```

## Splash.asm

–¢–µ–ø–µ—Ä—å –≤ –Ω–∞—à–µ–π `Screens/Splash Screen` —Å–æ–∑–¥–∞–¥–∏–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º `Splash.asm` –∏ –≤—Å—Ç–∞–≤–∏–º –≤ –Ω–µ–≥–æ —ç—Ç–æ—Ç –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥:

```m68k
; ---------------------------------------------------------------------------
; Splash Screen
; ---------------------------------------------------------------------------

Splash_VDP:
		dc.w $8004								; disable HInt, HV counter, 8-color mode
		dc.w $8200+(VRAM_Plane_A_Name_Table>>10)				; set foreground nametable address
		dc.w $8300+(VRAM_Plane_B_Name_Table>>10)				; set window nametable address
		dc.w $8400+(VRAM_Plane_B_Name_Table>>13)				; set background nametable address
		dc.w $8700+(0<<4)							; set background color (line 3; color 0)
		dc.w $8B00								; full-screen horizontal and vertical scrolling
		dc.w $8C81								; set 40cell screen size, no interlacing, no s/h
		dc.w $9001								; 64x32 cell nametable area
		dc.w $9100								; set window H position at default
		dc.w $9200								; set window V position at default
		dc.w 0									; end marker

; =============== S U B R O U T I N E =======================================

SplashScreen:
		music	mus_Stop							; stop music
		jsr	(Clear_KosPlus_Module_Queue).w					; clear KosPlusM PLCs
		ResetDMAQueue								; clear DMA queue
		jsr	(Pal_FadeToBlack).w
		disableInts
		move.l	#VInt,(V_int_addr).w
		move.l	#HInt,(H_int_addr).w
		disableScreen
		jsr	(Clear_DisplayData).w
		lea	Splash_VDP(pc),a1
		jsr	(Load_VDP).w
		jsr	(Clear_Palette).w
		clearRAM Object_RAM, Object_RAM_end					; clear the object RAM
		clearRAM Lag_frame_count, Lag_frame_count_end				; clear variables
		clearRAM Camera_RAM, Camera_RAM_end					; clear the camera RAM
		clearRAM Oscillating_variables, Oscillating_variables_end		; clear variables

		; clear
		move.b	d0,(Water_full_screen_flag).w
		move.b	d0,(Water_flag).w
		move.b	d0,(HUD_RAM.status).w
		move.b	d0,(Update_HUD_timer).w						; clear time counter update flag
		move.w	d0,(Current_zone_and_act).w
		move.w	d0,(Apparent_zone_and_act).w
		move.b	d0,(Last_star_post_hit).w
		move.b	d0,(Debug_mode_flag).w

		; load main art
		QueueKosPlusModule	ArtKosPM_Splash, 0

		; load main mapping
		EniDecomp	MapEni_Splash, RAM_start, 0, 0, FALSE			; decompress Enigma mappings
		copyTilemap	VRAM_Plane_A_Name_Table, 320, 224

		; load main palette
		lea	(Pal_Splash).l,a1
		lea	(Target_palette).w,a2
		jsr	(PalLoad_Line16).w

		; set
		move.l	#VInt_Fade,(V_int_ptr).w					; set VInt pointer

.waitplc
		st	(V_int_flag).w							; set VInt flag
		jsr	(Process_KosPlus_Queue).w
		jsr	(Wait_VSync.skip).w
		jsr	(Process_KosPlus_Module_Queue).w
		tst.w	(KosPlus_modules_left).w
		bne.s	.waitplc							; wait for KosPlusM queue to clear

		; next
		move.l	#VInt_Main,(V_int_ptr).w					; set VInt pointer
		jsr	(Wait_VSync).w
		enableScreen
		jsr	(Pal_FadeFromBlack).w

		; set
		move.w	#3*60,(Demo_timer).w						; set to wait for 3 seconds

.loop
		jsr	(Wait_VSync).w

		; check exit
		tst.b	(Ctrl_1_pressed).w
		bmi.s	.exit								; if start was pressed, skip ahead
		tst.w	(Demo_timer).w
		bne.s	.loop

.exit

		; exit
		move.b	#GameModeID_LevelSelectScreen,(Game_mode).w			; set screen mode to Level Select (SCE)
		rts
```

## –î–µ—Ä–µ–≤–æ –ø–∞–ø–∫–∏ Splash Screen

–í–æ—Ç —Ç–∞–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ `Screens/Splash Screen` –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è:

```
üìÅ S.C.E. / S1-in-S3 (–∫–æ—Ä–µ–Ω—å)
‚îî‚îÄ‚îÄ üìÅ Screens
	‚îú‚îÄ‚îÄ üìÅ Continue
	‚îú‚îÄ‚îÄ üìÅ Level
	‚îú‚îÄ‚îÄ üìÅ Level Select
	‚îî‚îÄ‚îÄ üìÅ Splash Screen
		‚îú‚îÄ‚îÄ üìÅ Enigma Map
		‚îÇ¬†¬† ‚îî‚îÄ‚îÄ üó∫Ô∏è Foreground.eni
		‚îú‚îÄ‚îÄ üìÅ KosinskiPM Art
		‚îÇ¬†¬† ‚îî‚îÄ‚îÄ üñºÔ∏è Foreground.kospm
		‚îú‚îÄ‚îÄ üìÅ Palettes
		‚îÇ¬†¬† ‚îî‚îÄ‚îÄ üé® 1.pal
		‚îî‚îÄ‚îÄ üìÑ Splash.asm
```

# –ü—Ä–æ–ø–∏—Å—ã–≤–∞–µ–º –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ **Splash Screen'a**. –í –ø–∞–ø–∫–µ [Data](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/tree/Clone-Driver-v2/Data "Data") –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –≤ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

```
üìÅ S.C.E. / S1-in-S3 (–∫–æ—Ä–µ–Ω—å)
‚îî‚îÄ‚îÄ	üìÅ Data
	‚îú‚îÄ‚îÄ üìÑ Enigma Data.asm
	‚îú‚îÄ‚îÄ üìÑ Kosinski Plus Module Data.asm
	‚îî‚îÄ‚îÄ üìÑ Palette Data.asm
```

–ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–π—Ç–µ –∫—É–¥–∞ –≤–ª–µ–ø–∏—Ç—å —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏, —Ç–æ –≤—Å—Ç–∞–≤—å—Ç–µ –∏—Ö –ø–µ—Ä–µ–¥ —Å—Ç—Ä–æ–∫–∞–º–∏ **Level Select**.

–ì—Ä–∞—Ñ–∏–∫—É –≤ [Kosinski Plus Module Data.asm](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/blob/Clone-Driver-v2/Data/Kosinski%20Plus%20Module%20Data.asm "Kosinski Plus Module Data.asm"):

```m68k
; ===========================================================================
; Kosinski Plus Module compressed Splash screen graphics
; ===========================================================================

;		Attribute	| Filename	| Folder

		incfile.b	ArtKosPM_Splash, "Screens/Splash/KosinskiPM Art/Foreground.kospm"
```

–ö–∞—Ä—Ç—É –≤ [Enigma Data.asm](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/blob/Clone-Driver-v2/Data/Enigma%20Data.asm "Enigma Data.asm"):

```m68k
; ===========================================================================
; Enigma compressed Splash screen data
; ===========================================================================

;		Attribute	| Filename	| Folder

		incfile.b	MapEni_Splash, "Screens/Splash/Enigma Map/Foreground.eni"
```

–ü–∞–ª–∏—Ç—Ä—ã –≤ [Palette Data.asm](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/blob/Clone-Driver-v2/Data/Palette%20Data.asm "Palette Data.asm"):

```m68k
; ===========================================================================
; Palette Splash screen data
; ===========================================================================

;		Attribute	| Filename	| Folder

		incfile.b	Pal_Splash, "Screens/Splash/Palettes/1.pal"
```

# –í–∫–ª—é—á–∞–µ–º Splash Screen

–û—Å—Ç–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å  –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∏–≥—Ä–æ–≤–æ–π —Ä–µ–∂–∏–º. –ù–∏–∂–µ –±—É–¥–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –∏–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–º–∏—Ç–µ –Ω–∞ GitHub [–¢–£–¢](https://github.com/Nichloya/Sonic-Clean-Engine-S.C.E.-Extended-/commit/7b0651c7c2229bdf41811d974231aafbace5bcb5).

```diff
+ –î–æ–±–∞–≤—å—Ç–µ –∑–µ–ª—ë–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å –ø–ª—é—Å–∞ (—Å–∞–º –ø–ª—é—Å –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–µ –Ω–∞–¥–æ).
- –ö—Ä–∞—Å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, –≤—ã –¥–æ–ª–∂–Ω—ã —É–¥–∞–ª–∏—Ç—å.
```

–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏–º –Ω–∞—à `Screens/Splash Screen/Splash.asm`, –¥–æ–±–∞–≤–∏–≤ –µ–≥–æ –≤ —Å–ø–∏—Å–æ–∫ includes –≤ [Engine/Includes.asm](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/blob/Clone-Driver-v2/Engine/Includes.asm):

```diff
 ; ---------------------------------------------------------------------------
 ; Objects data pointers
 ; ---------------------------------------------------------------------------

		include "Data/Objects Data.asm"

+; ---------------------------------------------------------------------------
+; Splash screen modules
+; ---------------------------------------------------------------------------
+
+		include "Screens/Splash/Splash.asm"
+
 ; ---------------------------------------------------------------------------
 ; Level Select screen modules
 ; ---------------------------------------------------------------------------

		include "Screens/Level Select/Level Select.asm"

```

–î–∞–ª—å—à–µ –≤ [Engine/Constants.asm](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/blob/Clone-Driver-v2/Engine/Constants.asm) –¥–æ–±–∞–≤–∏–º –Ω–∞—à –Ω–æ–≤—ã–π —ç–∫—Ä–∞–Ω –≤ —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç `Game mode routines`:

```diff
 ; ---------------------------------------------------------------------------
 ; Game mode routines
 ; ---------------------------------------------------------------------------

 offset := Game_Modes
 ptrsize := 1
 idstart := 0

+GameModeID_SplashScreen =					id(GameMode_SplashScreen)			; 0
 GameModeID_LevelSelectScreen =					id(GameMode_LevelSelectScreen)	; 4
 GameModeID_LevelScreen =					id(GameMode_LevelScreen)			; 8
 GameModeID_ContinueScreen =					id(GameMode_ContinueScreen)		; C

 GameModeFlag_TitleCard =					7						; flag bit
 GameModeID_TitleCard =						setBit(GameModeFlag_TitleCard)		; flag mask
```

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —ç–∫—Ä–∞–Ω **Splash Screen'a** –≤ `Game mode routines`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [Engine/Core/Security Startup 2.asm](https://github.com/TheBlad768/Sonic-Clean-Engine-S.C.E.-/blob/Clone-Driver-v2/Engine/Core/Security%20Startup%202.asm). –î–æ–±–∞–≤–∏–º –µ–≥–æ –≤ —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤:

```diff
 ; ---------------------------------------------------------------------------
 ; Main game mode array
 ; ---------------------------------------------------------------------------

 Game_Modes:
+		GameModeEntry SplashScreen						; Splash mode
		GameModeEntry LevelSelectScreen					; Level Select mode (SCE)
		GameModeEntry LevelScreen						; Zone play mode
		GameModeEntry ContinueScreen					; Continue mode
```

–ú–∞–∫—Ä–æ—Å `GameModeEntry` –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –ø–æ–∏—Å–∫–∞ —ç–∫—Ä–∞–Ω–∞. –ü–æ—ç—Ç–æ–º—É –Ω–∞–∑–≤–∞–Ω–∏—è –¥–æ–ª–∂—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ.

## –ú–µ–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –∏–≥—Ä—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —á—Ç–æ–±—ã –∏–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–ª–∞—Å—å —Å–æ **Splash Screen**, –∞ –Ω–µ **Level Select**, —Ç–æ –∏–∑–º–µ–Ω–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ—á–∫—É –∫–æ–¥–∞ –≤ —Ç–æ–º –∂–µ `Security Startup 2.asm`

```m68k
move.b	#GameModeID_LevelSelectScreen,(Game_mode).w
```

–ù–∞ —ç—Ç—É —Å—Ç—Ä–æ—á–∫—É –∫–æ–¥–∞:

```m68k
move.b	#GameModeID_SplashScreen,(Game_mode).w
```

–í–º–µ—Å—Ç–æ **Level Select** —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–≤—ã–º –±—É–¥–µ—Ç –≥—Ä—É–∑–∏—Ç—å—Å—è –Ω–∞—à –Ω–æ–≤—ã–π **Splash Screen**.